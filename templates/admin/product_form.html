{% extends "base.html" %}
{% block title %}Admin - Nuevo Producto{% endblock %}

{% block content %}
<section class="container main">
  <div style="display:flex; gap:12px; align-items:flex-end; justify-content:space-between; flex-wrap:wrap;">
    <div>
      <h1 class="page-title" style="margin-bottom:6px;">Nuevo producto</h1>
      <p class="page-subtitle">Crear producto en Appwrite.</p>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a class="btn-outline" href="/admin/products">Volver</a>
    </div>
  </div>

  {# âœ… MOSTRAR FLASH (errores/exitos) #}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-wrap" style="margin-top:14px;">
        {% for category, message in messages %}
          <div class="flash {% if category == 'success' %}flash-success{% else %}flash-error{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="summary-box auth-card" style="margin-top:14px;">
    <form method="POST" action="/admin/products/new" enctype="multipart/form-data">
      <div class="auth-grid">

        <div class="auth-field">
          <label>Nombre</label>
          <input class="auth-input" name="name" type="text" required>
        </div>

        <div class="auth-field">
          <label>Precio (numero)</label>
          <input class="auth-input" name="base_price" type="number" min="1" step="1" required>
        </div>

        <div class="auth-field">
          <label>Categoria (slug) - ejemplo: pulseras, cadenas</label>
          <input class="auth-input" name="category" type="text" required>
        </div>

        <div class="auth-field">
          <label>Descripcion</label>
          <textarea class="auth-input" name="description" rows="3"></textarea>
        </div>

        <div class="auth-field">
          <label>Color</label>
          <input class="auth-input" name="color" type="text" value="Dorado">
        </div>

        <div class="auth-field">
          <label>Tipo de oro</label>
          <input class="auth-input" name="gold_type" type="text" value="18k">
        </div>

        <div class="auth-field">
          <label>Imagen del producto</label>
          <input class="auth-input" name="image_file" type="file" accept="image/*">
          <div class="muted" style="margin-top:6px;">
            Sube una imagen (jpg, png, webp). Si no subes, queda sin foto.
          </div>
        </div>


        <div class="auth-field">
        <label style="display:flex; gap:10px; align-items:center; font-weight:800;">
          <input type="checkbox" name="is_active" checked style="transform:scale(1.1);">
          Producto activo (visible en catalogo)
        </label>
        <div class="muted" style="margin-top:6px;">
          Si lo desmarcas, el producto queda guardado pero lo puedes ocultar del catalogo.
        </div>
        </div>


        <button class="btn" type="submit" style="margin-top:6px;">Crear producto</button>
      </div>
    </form>
  </div>
</section>
{% endblock %}
